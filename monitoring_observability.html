<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Monitoring & Observability | Semantica.ai</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0A1929 0%, #1a2332 100%);
            color: #F0F4F8;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        body::before,
        body::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
            pointer-events: none;
            animation: float 20s ease-in-out infinite;
        }

        body::before {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, #10b981, transparent);
            top: -200px;
            left: -200px;
        }

        body::after {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, #6366f1, transparent);
            bottom: -150px;
            right: -150px;
            animation-delay: 10s;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0) scale(1);
            }

            33% {
                transform: translate(30px, -30px) scale(1.1);
            }

            66% {
                transform: translate(-20px, 20px) scale(0.9);
            }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        .nav-back {
            display: inline-flex;
            align-items: center;
            color: #94A3B8;
            text-decoration: none;
            margin-bottom: 30px;
            font-size: 0.9rem;
            transition: color 0.3s;
        }

        .nav-back:hover {
            color: #F0F4F8;
        }

        .hero {
            text-align: center;
            margin-bottom: 60px;
            animation: headerFade 1s ease;
        }

        @keyframes headerFade {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #10b981 0%, #6366f1 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        .subtitle {
            color: #94A3B8;
            font-size: 1.3rem;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 35px;
            margin-bottom: 35px;
            backdrop-filter: blur(10px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            animation: cardFadeIn 0.6s ease backwards;
        }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card:hover {
            transform: translateY(-5px);
            border-color: rgba(16, 185, 129, 0.5);
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.2);
        }

        h2 {
            font-size: 2rem;
            color: #fff;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 1.5rem;
            color: #10b981;
            margin-bottom: 15px;
            margin-top: 30px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .metric-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(99, 102, 241, 0.05));
            padding: 25px;
            border-radius: 16px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .metric-card h4 {
            color: #10b981;
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 5px;
        }

        .metric-desc {
            color: #94A3B8;
            font-size: 0.85rem;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th,
        td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        th {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
            font-weight: 600;
        }

        tr:hover {
            background: rgba(16, 185, 129, 0.05);
        }

        .alert-box {
            background: rgba(16, 185, 129, 0.1);
            border-left: 4px solid #10b981;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 25px 0;
        }

        .alert-box h4 {
            color: #10b981;
            margin-bottom: 10px;
        }

        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border-left: 4px solid #fbbf24;
            padding: 20px;
            border-radius: 0 12px 12px 0;
            margin: 25px 0;
        }

        .warning-box h4 {
            color: #fbbf24;
            margin-bottom: 10px;
        }

        .category-header {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.1));
            padding: 15px 20px;
            border-radius: 12px;
            margin: 30px 0 15px 0;
            border-left: 4px solid #6366f1;
        }

        .category-header h3 {
            color: #6366f1;
            margin: 0;
        }

        code {
            background: rgba(0, 0, 0, 0.4);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Monaco', monospace;
            color: #10b981;
            font-size: 0.9em;
        }

        .tool-badge {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(99, 102, 241, 0.2);
            border-radius: 8px;
            font-size: 0.85rem;
            margin: 5px;
            color: #a5b4fc;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <a href="ai_architecture_strategy.html" class="nav-back" style="margin-bottom: 0;">‚Üê Prev: AI Strategy</a>
            <a href="security_compliance.html" class="nav-back" style="margin-bottom: 0;">Next: Security & Compliance
                ‚Üí</a>
        </div>

        <div class="hero">
            <h1>üìä System Monitoring & Observability</h1>
            <p class="subtitle">Complete observability stack for 99.9% uptime, performance optimization, and proactive
                incident response</p>
        </div>

        <!-- Overview -->
        <div class="card">
            <h2>üéØ Monitoring Philosophy</h2>
            <p style="color: #CBD5E1; margin-bottom: 25px;">
                At Semantica, we monitor <strong>every layer</strong> of the stack‚Äîfrom LLM API latency to database
                connection pools to user query success rates. Our goal: detect issues before users do, optimize costs in
                real-time, and maintain 99.9% uptime SLA.
            </p>

            <div class="metrics-grid">
                <div class="metric-card">
                    <h4>Uptime SLA</h4>
                    <div class="metric-value">99.9%</div>
                    <p class="metric-desc">
                        < 43 minutes downtime/month</p>
                </div>

                <div class="metric-card">
                    <h4>Alert Response Time</h4>
                    <div class="metric-value">
                        < 5min</div>
                            <p class="metric-desc">P0 incidents escalated immediately</p>
                    </div>

                    <div class="metric-card">
                        <h4>Metrics Collected</h4>
                        <div class="metric-value">500+</div>
                        <p class="metric-desc">Infrastructure, app, and business metrics</p>
                    </div>

                    <div class="metric-card">
                        <h4>Log Retention</h4>
                        <div class="metric-value">90 days</div>
                        <p class="metric-desc">Full query logs for debugging</p>
                    </div>
                </div>

                <div class="alert-box">
                    <h4>üí° Three Pillars of Observability</h4>
                    <p style="color: #CBD5E1; line-height: 1.8;">
                        <strong>1. Metrics:</strong> Time-series data (response time, error rate, CPU usage)<br>
                        <strong>2. Logs:</strong> Structured event data (query execution, errors, user actions)<br>
                        <strong>3. Traces:</strong> Distributed request flow (API ‚Üí LangGraph ‚Üí LLM ‚Üí Database)
                    </p>
                </div>
            </div>

            <!-- Tools & Stack -->
            <div class="card">
                <h2>üõ†Ô∏è Observability Stack</h2>

                <div class="category-header">
                    <h3>Application Performance Monitoring (APM)</h3>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>Purpose</th>
                            <th>What We Track</th>
                            <th>Cost (Production)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Datadog APM</strong></td>
                            <td>Full-stack monitoring</td>
                            <td>API latency, database queries, LLM calls, error traces</td>
                            <td>‚Çπ6,375/mo</td>
                        </tr>
                        <tr>
                            <td><strong>LangSmith</strong></td>
                            <td>LangGraph agent monitoring</td>
                            <td>Agent execution flow, LLM token usage, SQL generation accuracy</td>
                            <td>‚Çπ1,700/mo</td>
                        </tr>
                        <tr>
                            <td><strong>Sentry</strong></td>
                            <td>Error tracking</td>
                            <td>Python exceptions, React errors, stack traces, user context</td>
                            <td>‚Çπ2,210/mo</td>
                        </tr>
                    </tbody>
                </table>

                <div class="category-header">
                    <h3>Infrastructure Monitoring</h3>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>Purpose</th>
                            <th>What We Track</th>
                            <th>Cost (Production)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>AWS CloudWatch</strong></td>
                            <td>AWS services monitoring</td>
                            <td>ECS tasks, RDS metrics, Redis cache, ALB traffic, Lambda invocations</td>
                            <td>‚Çπ2,200/mo</td>
                        </tr>
                        <tr>
                            <td><strong>AWS X-Ray</strong></td>
                            <td>Distributed tracing</td>
                            <td>Request flow across microservices, bottleneck identification</td>
                            <td>Included in CloudWatch</td>
                        </tr>
                        <tr>
                            <td><strong>Datadog Infrastructure</strong></td>
                            <td>Host-level metrics</td>
                            <td>CPU, memory, disk I/O, network traffic per ECS task</td>
                            <td>Included in APM</td>
                        </tr>
                    </tbody>
                </table>

                <div class="category-header">
                    <h3>Logging & Analytics</h3>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>Purpose</th>
                            <th>What We Log</th>
                            <th>Retention</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>CloudWatch Logs</strong></td>
                            <td>Centralized logging</td>
                            <td>Application logs, ECS container logs, Lambda logs</td>
                            <td>90 days</td>
                        </tr>
                        <tr>
                            <td><strong>PostgreSQL Query Logs</strong></td>
                            <td>Database audit trail</td>
                            <td>All SQL queries, execution time, user context</td>
                            <td>90 days</td>
                        </tr>
                        <tr>
                            <td><strong>LangSmith Traces</strong></td>
                            <td>AI agent debugging</td>
                            <td>Full LangGraph execution, LLM I/O, intermediate results</td>
                            <td>30 days</td>
                        </tr>
                    </tbody>
                </table>

                <div class="category-header">
                    <h3>Incident Management</h3>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Tool</th>
                            <th>Purpose</th>
                            <th>Integration</th>
                            <th>Cost (Production)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>PagerDuty</strong></td>
                            <td>On-call alerting</td>
                            <td>Datadog + CloudWatch ‚Üí PagerDuty ‚Üí Slack + Phone</td>
                            <td>‚Çπ8,925/mo</td>
                        </tr>
                        <tr>
                            <td><strong>Slack</strong></td>
                            <td>Team communication</td>
                            <td>#alerts, #errors, #deploys channels with bot integrations</td>
                            <td>‚Çπ0 (Free tier)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert-box" style="margin-top: 30px;">
                    <h4>üìä Total Monitoring Cost (Production)</h4>
                    <p style="color: #CBD5E1; line-height: 1.8;">
                        ‚Ä¢ Datadog: ‚Çπ6,375/mo<br>
                        ‚Ä¢ CloudWatch: ‚Çπ2,200/mo<br>
                        ‚Ä¢ LangSmith: ‚Çπ1,700/mo<br>
                        ‚Ä¢ Sentry: ‚Çπ2,210/mo<br>
                        ‚Ä¢ PagerDuty: ‚Çπ8,925/mo<br><br>
                        <strong>Total: ‚Çπ21,410/month (6% of total infrastructure cost)</strong>
                    </p>
                </div>
            </div>

            <!-- Key Metrics -->
            <div class="card">
                <h2>üìà What We Monitor (500+ Metrics)</h2>

                <h3>Application Metrics (Business-Critical)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Target/Threshold</th>
                            <th>Alert Level</th>
                            <th>Why It Matters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>query.success_rate</code></td>
                            <td>> 95%</td>
                            <td>P0 if < 90%</td>
                            <td>SQL generation accuracy, core product quality</td>
                        </tr>
                        <tr>
                            <td><code>query.response_time_p99</code></td>
                            <td>
                                < 5s</td>
                            <td>P1 if > 10s</td>
                            <td>User experience, perceived performance</td>
                        </tr>
                        <tr>
                            <td><code>llm.token_usage</code></td>
                            <td>
                                < 2000 tokens/query avg</td>
                            <td>P2 if > 3000</td>
                            <td>Cost control (‚Çπ1.99/query baseline)</td>
                        </tr>
                        <tr>
                            <td><code>database.connection_pool</code></td>
                            <td>> 20% available</td>
                            <td>P0 if < 5%</td>
                            <td>Prevents query failures, connection exhaustion</td>
                        </tr>
                        <tr>
                            <td><code>user.active_sessions</code></td>
                            <td>Track trends</td>
                            <td>No alert</td>
                            <td>Product adoption, usage patterns</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 35px;">Infrastructure Metrics (Reliability)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Target/Threshold</th>
                            <th>Alert Level</th>
                            <th>Why It Matters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>ecs.cpu_utilization</code></td>
                            <td>
                                < 70%</td>
                            <td>P1 if > 90%</td>
                            <td>Auto-scaling trigger, prevent throttling</td>
                        </tr>
                        <tr>
                            <td><code>rds.connection_count</code></td>
                            <td>
                                < 80% max</td>
                            <td>P0 if > 95%</td>
                            <td>Database availability</td>
                        </tr>
                        <tr>
                            <td><code>redis.memory_usage</code></td>
                            <td>
                                < 75%</td>
                            <td>P1 if > 90%</td>
                            <td>Cache eviction prevention</td>
                        </tr>
                        <tr>
                            <td><code>alb.5xx_error_rate</code></td>
                            <td>
                                < 0.1%</td>
                            <td>P0 if > 1%</td>
                            <td>Service availability</td>
                        </tr>
                        <tr>
                            <td><code>s3.get_latency</code></td>
                            <td>
                                < 100ms</td>
                            <td>P2 if > 500ms</td>
                            <td>Export file download speed</td>
                        </tr>
                    </tbody>
                </table>

                <h3 style="margin-top: 35px;">AI/LLM Metrics (Cost & Quality)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Target/Threshold</th>
                            <th>Alert Level</th>
                            <th>Why It Matters</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>llm.cost_per_query</code></td>
                            <td>‚Çπ1.99</td>
                            <td>P2 if > ‚Çπ3</td>
                            <td>Unit economics, margin preservation</td>
                        </tr>
                        <tr>
                            <td><code>llm.gpt4o_mini_ratio</code></td>
                            <td>> 70%</td>
                            <td>P2 if < 50%</td>
                            <td>Cost optimization (mini is 17x cheaper)</td>
                        </tr>
                        <tr>
                            <td><code>langchain.agent_failures</code></td>
                            <td>
                                < 5%</td>
                            <td>P1 if > 10%</td>
                            <td>Agent reliability, SQL generation quality</td>
                        </tr>
                        <tr>
                            <td><code>clarification.prompt_rate</code></td>
                            <td>10-20%</td>
                            <td>P2 if > 40%</td>
                            <td>UX balance (too many prompts frustrate users)</td>
                        </tr>
                        <tr>
                            <td><code>schema_cache.hit_rate</code></td>
                            <td>> 85%</td>
                            <td>P2 if < 70%</td>
                            <td>Saves ‚Çπ0.20/query in embedding costs</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Alerting Strategy -->
            <div class="card">
                <h2>üö® Alerting & Incident Response</h2>

                <h3>Alert Severity Levels</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Level</th>
                            <th>Criteria</th>
                            <th>Response Time</th>
                            <th>Escalation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong style="color: #ef4444;">P0 - Critical</strong></td>
                            <td>Service down, data loss, security breach</td>
                            <td>
                                < 5 minutes</td>
                            <td>Immediate PagerDuty ‚Üí Phone call ‚Üí CEO if no response</td>
                        </tr>
                        <tr>
                            <td><strong style="color: #f59e0b;">P1 - High</strong></td>
                            <td>Degraded performance, elevated errors (> 5%)</td>
                            <td>
                                < 15 minutes</td>
                            <td>Slack alert ‚Üí On-call engineer ‚Üí CTO if unresolved 1hr</td>
                        </tr>
                        <tr>
                            <td><strong style="color: #eab308;">P2 - Medium</strong></td>
                            <td>Cost anomaly, cache miss spike, slow queries</td>
                            <td>
                                < 1 hour</td>
                            <td>Slack #alerts channel ‚Üí Team review next morning</td>
                        </tr>
                        <tr>
                            <td><strong style="color: #3b82f6;">P3 - Low</strong></td>
                            <td>Informational, metric trend anomaly</td>
                            <td>No SLA</td>
                            <td>Email digest, review weekly</td>
                        </tr>
                    </tbody>
                </table>

                <div class="warning-box" style="margin-top: 25px;">
                    <h4>‚ö†Ô∏è Alert Fatigue Prevention</h4>
                    <p style="color: #CBD5E1; line-height: 1.8;">
                        <strong>Problem:</strong> Too many alerts = team ignores them = missed critical issues<br><br>
                        <strong>Our Rules:</strong><br>
                        1. <strong>Deduplication:</strong> Same alert within 15 min = grouped (not 20 separate
                        pings)<br>
                        2. <strong>Smart Thresholds:</strong> Alerts only on sustained issues (5min window, not 1
                        spike)<br>
                        3. <strong>Context:</strong> Every alert has runbook link (what to do, not just "error")<br>
                        4. <strong>Tuning:</strong> Review alert effectiveness monthly, disable noisy/non-actionable
                        ones<br>
                        5. <strong>Business Hours:</strong> P2/P3 alerts only 9am-6pm IST (not 3am wake-ups)
                    </p>
                </div>

                <h3 style="margin-top: 35px;">Runbook Examples (What to Do When Alert Fires)</h3>

                <div class="alert-box">
                    <h4>Alert: query.success_rate < 90% for 5 minutes</h4>
                            <p
                                style="color: #CBD5E1; line-height: 1.8; font-family: 'Monaco', monospace; font-size: 0.9rem;">
                                1. Check LangSmith dashboard for agent failure patterns<br>
                                2. Review last 50 failed queries in CloudWatch Logs<br>
                                3. If LLM API issue: Switch to Claude fallback (toggle feature flag)<br>
                                4. If database timeout: Scale RDS read replicas<br>
                                5. If unknown: Roll back last deployment (kubectl rollback)<br>
                                6. Post incident report in #incidents Slack channel
                            </p>
                </div>

                <div class="alert-box">
                    <h4>Alert: llm.cost_per_query > ‚Çπ3 for 30 minutes</h4>
                    <p style="color: #CBD5E1; line-height: 1.8; font-family: 'Monaco', monospace; font-size: 0.9rem;">
                        1. Check llm.gpt4o_mini_ratio metric (should be > 70%)<br>
                        2. If < 50%: Routing logic broken, check LangGraph decision logic<br>
                            3. Review schema_cache.hit_rate (should be > 85%)<br>
                            4. If cache miss spike: Restart Redis, check TTL config<br>
                            5. Analyze top 10 expensive queries (> 10K tokens)<br>
                            6. If legitimate complexity spike: No action (customer behavior change)
                    </p>
                </div>
            </div>

            <!-- Dashboards -->
            <div class="card">
                <h2>üìä Monitoring Dashboards</h2>

                <h3>Executive Dashboard (CEO/Stakeholders)</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <h4>Uptime (30-day)</h4>
                        <p class="metric-desc">Target: 99.9%</p>
                    </div>
                    <div class="metric-card">
                        <h4>Active Users</h4>
                        <p class="metric-desc">Monthly/Weekly/Daily actives</p>
                    </div>
                    <div class="metric-card">
                        <h4>Queries Processed</h4>
                        <p class="metric-desc">Total volume + trend</p>
                    </div>
                    <div class="metric-card">
                        <h4>AI Cost per Query</h4>
                        <p class="metric-desc">Target: ‚Çπ1.99, Monitor drift</p>
                    </div>
                </div>

                <h3 style="margin-top: 35px;">Engineering Dashboard (On-Call Team)</h3>
                <div class="tool-badge">API Response Time (p50, p95, p99)</div>
                <div class="tool-badge">Error Rate (5xx, 4xx breakdown)</div>
                <div class="tool-badge">Database Query Performance</div>
                <div class="tool-badge">LLM API Latency</div>
                <div class="tool-badge">Background Job Queue Depth</div>
                <div class="tool-badge">Redis Cache Hit Rate</div>
                <div class="tool-badge">ECS Task Health</div>

                <h3 style="margin-top: 35px;">AI/ML Dashboard (Data Science Team)</h3>
                <div class="tool-badge">SQL Accuracy by Query Type</div>
                <div class="tool-badge">Clarification Prompt Rate</div>
                <div class="tool-badge">LLM Model Distribution</div>
                <div class="tool-badge">Token Usage Trends</div>
                <div class="tool-badge">Schema Embedding Quality</div>
                <div class="tool-badge">Agent Execution Time Breakdown</div>

                <h3 style="margin-top: 35px;">Business Dashboard (Product/Growth)</h3>
                <div class="tool-badge">Queries per User (engagement)</div>
                <div class="tool-badge">Retention Cohorts</div>
                <div class="tool-badge">Feature Usage (exports, Slack, API)</div>
                <div class="tool-badge">Query Complexity Distribution</div>
                <div class="tool-badge">Churn Prediction (low-usage users)</div>
            </div>

            <!-- Cost Optimization -->
            <div class="card">
                <h2>üí∞ Cost Monitoring & Optimization</h2>

                <p style="color: #CBD5E1; margin-bottom: 25px;">
                    Observability isn't just for reliability‚Äîit's how we keep unit economics healthy at ‚Çπ3.48/query.
                </p>

                <h3>Real-Time Cost Tracking</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Cost Category</th>
                            <th>Tracking Method</th>
                            <th>Alert Threshold</th>
                            <th>Optimization Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>LLM API Costs</strong></td>
                            <td>OpenAI/Anthropic usage logs ‚Üí Datadog custom metric</td>
                            <td>> ‚Çπ25K/day</td>
                            <td>Increase GPT-4o-mini routing from 70% ‚Üí 80%</td>
                        </tr>
                        <tr>
                            <td><strong>Database Costs</strong></td>
                            <td>RDS performance insights ‚Üí slow query log</td>
                            <td>> 5 slow queries/hour</td>
                            <td>Add index, optimize query, cache result</td>
                        </tr>
                        <tr>
                            <td><strong>Data Transfer</strong></td>
                            <td>CloudWatch network metrics</td>
                            <td>> 1TB outbound/day</td>
                            <td>Enable compression, investigate large exports</td>
                        </tr>
                        <tr>
                            <td><strong>Compute (ECS)</strong></td>
                            <td>Fargate cost allocation tags</td>
                            <td>CPU > 80% sustained</td>
                            <td>Horizontal scaling vs vertical (more small tasks cheaper)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert-box">
                    <h4>üí° Cost Anomaly Detection</h4>
                    <p style="color: #CBD5E1; line-height: 1.8;">
                        <strong>Scenario:</strong> Normal AI cost is ‚Çπ20K/day. One day spikes to ‚Çπ60K.<br><br>
                        <strong>Our System Detects:</strong><br>
                        1. CloudWatch alarm: "AI daily spend > ‚Çπ30K"<br>
                        2. Datadog investigation: 3 customers running 10K+ queries each (unusual)<br>
                        3. Analysis: Legitimate usage spike (customer migrated from Excel, backfilling history)<br>
                        4. Action: Proactive outreach to customer, offer Business plan upgrade (normal behavior)<br><br>
                        <strong>Result:</strong> Convert spike from "cost overrun" to "upsell opportunity" (‚Çπ9,999
                        Business plan)
                    </p>
                </div>
            </div>

            <!-- Performance Optimization -->
            <div class="card">
                <h2>‚ö° Performance Monitoring & Optimization</h2>

                <h3>Query Performance Breakdown (Target: < 3s end-to-end)</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Stage</th>
                                    <th>Target Latency</th>
                                    <th>What We Measure</th>
                                    <th>Optimization Lever</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>1. Schema Retrieval</strong></td>
                                    <td>
                                        < 200ms</td>
                                    <td>LanceDB vector search + Redis cache lookup</td>
                                    <td>Cache hit rate (target: 85%+)</td>
                                </tr>
                                <tr>
                                    <td><strong>2. Clarification Check</strong></td>
                                    <td>
                                        < 300ms</td>
                                    <td>GPT-4o-mini ambiguity detection</td>
                                    <td>Batch requests, prompt optimization</td>
                                </tr>
                                <tr>
                                    <td><strong>3. SQL Generation</strong></td>
                                    <td>
                                        < 800ms</td>
                                    <td>LLM API call (GPT-4o or Claude)</td>
                                    <td>Model selection, prompt size reduction</td>
                                </tr>
                                <tr>
                                    <td><strong>4. SQL Execution</strong></td>
                                    <td>
                                        < 1000ms</td>
                                    <td>Customer database query time</td>
                                    <td>Query optimization, indexing suggestions</td>
                                </tr>
                                <tr>
                                    <td><strong>5. Format Decision</strong></td>
                                    <td>
                                        < 200ms</td>
                                    <td>Result analysis + chart generation</td>
                                    <td>Pre-compute for common patterns</td>
                                </tr>
                                <tr>
                                    <td><strong>Total</strong></td>
                                    <td><strong>
                                            < 2500ms</strong>
                                    </td>
                                    <td>Full user-facing latency</td>
                                    <td>p95 < 5s, p99 < 10s</td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="warning-box">
                            <h4>‚ö†Ô∏è Latency Budget Exceeded: What We Do</h4>
                            <p style="color: #CBD5E1; line-height: 1.8;">
                                If p95 latency > 5s for 10 minutes:<br><br>
                                1. <strong>Identify bottleneck:</strong> X-Ray traces show which stage is slow<br>
                                2. <strong>Quick fixes:</strong><br>
                                - Schema cache miss spike ‚Üí invalidate and rebuild cache<br>
                                - LLM API slow ‚Üí switch to Groq Llama (faster, lower quality fallback)<br>
                                - Customer DB timeout ‚Üí suggest query simplification to user<br>
                                3. <strong>Long-term fix:</strong> Add to optimization backlog (e.g., parallel LLM
                                calls)
                            </p>
                        </div>
            </div>

            <!-- Security Monitoring -->
            <div class="card">
                <h2>üîí Security & Compliance Monitoring</h2>

                <h3>Security Metrics We Track</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Metric</th>
                            <th>Tool</th>
                            <th>Alert Threshold</th>
                            <th>Compliance Requirement</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Failed Login Attempts</strong></td>
                            <td>CloudWatch Logs</td>
                            <td>> 5 failures/user/hour</td>
                            <td>DPDP Act (account lockout)</td>
                        </tr>
                        <tr>
                            <td><strong>Unauthorized API Calls</strong></td>
                            <td>AWS WAF Logs</td>
                            <td>> 100 4xx errors/hour</td>
                            <td>SOC 2 (access control)</td>
                        </tr>
                        <tr>
                            <td><strong>Data Export Volume</strong></td>
                            <td>Application logs</td>
                            <td>> 1GB/user/day</td>
                            <td>DPDP Act (data exfiltration detection)</td>
                        </tr>
                        <tr>
                            <td><strong>Encryption Status</strong></td>
                            <td>AWS KMS Audit</td>
                            <td>Any unencrypted data at rest</td>
                            <td>SOC 2 (encryption mandate)</td>
                        </tr>
                        <tr>
                            <td><strong>Credential Rotation</strong></td>
                            <td>HashiCorp Vault logs</td>
                            <td>> 90 days since rotation</td>
                            <td>SOC 2 (credential hygiene)</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert-box">
                    <h4>üí° Compliance Audit Trail</h4>
                    <p style="color: #CBD5E1; line-height: 1.8;">
                        <strong>Every action is logged for DPDP Act compliance:</strong><br>
                        ‚Ä¢ User login/logout (with IP address, device fingerprint)<br>
                        ‚Ä¢ Data access (what query, which tables, timestamp)<br>
                        ‚Ä¢ Data export (CSV/PDF downloads, size, recipient)<br>
                        ‚Ä¢ Permission changes (role updates, user invites)<br>
                        ‚Ä¢ System configuration changes (who changed what, when)<br><br>
                        <strong>Retention:</strong> 1 year (DPDP requirement), stored in immutable S3 Glacier<br>
                        <strong>Access:</strong> Only compliance officer + auditors, all access logged
                    </p>
                </div>
            </div>

        </div>
</body>

</html>
